---
title: 'PH142 Data Project'
author: "Colin FitzGerald, Natalie Miramontes, Quinn Dahl, Amanda Tanaka, Celina Alnakib"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output: pdf_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(ggplot2)
library(broom)
library(dplyr)
```

1. [2 marks] What is the problem your are addressing with these data? State the question you are trying
to answer and let us know what type of question this is in terms of the PPDAC framework.

The problem we are addressing with this data is the estimation of obesity levels based on eating habits and physical condition. 

We are trying to answer the question of whether there are specific factors within eating habits and physical conditions that leads to a higher levels of obesity. Some of these factors include frequent consumption of high caloric food, number of main meals, consumption of water daily, physical activity frequency, and transportation used. This question is a causative/etiologic question:

Are there potential associations or trends within the eating habits and physical conditions of individuals of Mexico, Peru and Columbia that may have lead to higher levels of obesity in the respective countries?

\newpage

2. [2 marks] What is the target population for your project? Why was this target chosen i.e., what was
your rationale for wanting to answer this question in this specific population?

The target population for this project are individuals from Mexico, Peru, and Columbia between the ages of 14 and 61 with diverse eating habits and physical conditions. 

The rationale for wanting to answer this question in this specific population is that  we want to study potential community or cultural factors that may have led to high obesity levels and be able to make a generalization of risk factors for these specific countries.

There are people with all different factors and exposures that can help us identify key factors that lead to an increase in obesity levels. Specifically, these countries were chosen as they have high rates of obesity and are currently showing no steps at lowering them. This may provide insight on the factors that increase obesity levels and may show us areas that can be focused on to lower these levels. 

\newpage

3. [2 marks] What is the sampling frame used to collect the data you are using? Describe why you think
this sampling strategy is appropriate for your question. To what group(s) would you feel comfortable
generalizing the findings of your study and why.

This data comes from an estimation of obesity levels in people from the countries of Mexico, Peru and Colombia, with ages between 14 and 61 and diverse eating habits and physical condition. 

Data was collected using a web platform with a survey where anonymous users answered each question, then the information was processed obtaining 17 attributes and 2111 records. The attributes that were collected were related to eating habits, physical conditions, gender, age, height and weight. 
This sampling strategy is appropriate for our question given we are interested in looking at and getting more information on potential community or culture driven factors that lead to a higher levels of obesity in each country. 

We would feel comfortable generalizing the findings of our study to Mexico, Peru, and Colombia’s neighboring countries in Central and South America given that we may find potential trends and associations in the eating and physical habits across the three countries.

\newpage

4. [2 marks] Write a brief description (1-4 sentences) of the source and contents of your dataset. Provide
a URL to the original data source if applicable. If not (e.g., the data came from your internship),
provide 1-2 sentences saying where the data came from. If you completed a web form to access the
data and selected a subset, describe these steps (including any options you selected) and the date you
accessed the data.

https://archive.ics.uci.edu/ml/datasets/Estimation+of+obesity+levels+based+on+eating+habits+and+physical+condition+. 

The data came from the UC Irvine Machine Learning Repository and contains information such as Frequent consumption of high caloric food (FAVC), Frequency of consumption of vegetables (FCVC), Physical activity frequency (FAF), Time using technology devices (TUE), Transportation used (MTRANS), and other variables as such. We didn’t have to complete a web form to access the data and did not need to subset it either. There were links to download both the Data Folder and the Data Set Description at the top of the website. We accessed the data on Monday February 21, 2022. 

\newpage

5. [1 mark] Write code below to import your data into R. Assign your dataset to an object.
```{r, message=FALSE}
obesity_data <- read_csv("ObesityDataSet_raw_and_data_sinthetic.csv")
```

\newpage

6. [3 marks] Use code in R to answer the following questions:
i) What are the dimensions of the dataset?

```{r}
dim(obesity_data)
```

The dimensions of the dataset are 2111 rows by 17 columns. 


ii) Provide a list of variable names.

```{r}
spec(obesity_data)
```


iii) Print the first six rows of the dataset.

```{r}
head(obesity_data)
```

\newpage


7. [4 marks] Use the data to demonstrate a statistical concept from Part I of the course. Describe the
concept that you are demonstrating and interpret the findings. This should be a combination of code
and written explanation.

The overarching statistical concept that our group wanted to demostrated in the linear association between two quantitative variables from our dataset. The two variables we did this with were height of participants (in meters) and weight of participants (in kilograms). The method we used to do so was performing linear regression of the dependent variable in this case of weight on the explanatory variable of height. We first made a scatter plot through ggplot2 with a best fit regression line include from the first code chunk below to visualize the data and get a sense of what the regression coefficients should look like. We then performed linear regression shown in the second code chunk below and received a readout for the regression coefficients as -134.6 for the intercept coefficient and 130.0 for the coefficient of height on weight. In context, the intercept coefficient indicates that a person with a height of 0.0 meters should weigh -134.6 kg. Obviously this doesn't make sense in context because people cannot have negative weights and this readout comes from the narrowness of our sampling data. Only people between roughly 1.4 meters and 2.0 meters in height are included in this dataframe, and because this data is looking at primarily obese individuals, the data most likely has a somewhat unrepresentative height to weight ratio when performing regression as compared to the general population. In context, the readout for the height coefficient suggests that a 1 meter increase in the height of a participant will mean that there will be a 130 kg increase in the weight of the individual. This coefficient makes more sense in context as there tends to be a direct relationship between height and weight in people, but the magnitude of this coefficient is likely biased to the selection of the sampling frame as well.

```{r}
obesity_hw_scatter = ggplot(data = obesity_data, aes(x = Height, y = Weight)) + geom_point() +
  geom_smooth(method = lm) + labs(title = 'Obesity Data Heights and Weights Plotted')
obesity_hw_scatter
```

```{r}
obesity_hw_regression <- lm(Weight ~ Height, data = obesity_data)
obesity_hw_regression
```


\newpage 

## Part 2

2. [2 marks] Describe a quantity you will estimate as an outcome in your problem using probability
notation. Are you planning to calculate marginal probabilities? Conditional probabilities?

```{r}
library(janitor)
obesity_data$CAEC <- factor(obesity_data$CAEC, levels=c('no', 'Sometimes', 'Frequently', 'Always'))
tabyl(obesity_data, Gender, CAEC) %>% adorn_totals(where = c("row", "col")) %>% adorn_percentages("row") %>% adorn_pct_formatting() %>% adorn_ns() %>% knitr::kable()
```

We would like to calculate the conditional probabilities of eating habits based on gender. We are curious to see how eating habits between meals vary by gender. 

$P$(does not eat between meals | Female) $= 15/1043 = 1.4$%

$P$(sometimes eats between meals | Female) $= 844/1043 = 80.9$%

$P$(frequently eats between meals | Female) $= 161/1043 = 15.4$%

$P$(always eats between meals | Female) $= 23/1043 = 2.2$%

$P$(does not eat between meals | Male) $= 36/1068 = 3.4$%

$P$(sometimes eats between meals | Male) $= 921/1068 = 86.2$%

$P$(frequently eats between meals | Male) $= 81/1068 = 7.6$%

$P$(always eats between meals | Male) $= 30/1068 = 2.8$%

The above probabilities are the probability of each eating habit conditioned on gender. 

\newpage


3. [3 marks] Describe the type of theoretical distribution that is relevant for your data.
i) What type of variable(s) are you investigating (continuous, categorical, ordinal, etc)?
ii) What theoretical distribution that we have talked about would potentially be appropriate to use with
these data (Normal, Binomial, Poisson. . . )
iii) Why is this an appropriate model for the data you are studying?

\newpage


4. [4 marks] Use the data you have to demonstrate a statistical concept from Part II of the course.
Describe the concept that you are demonstrating and interpret the findings. This may include code in
R, a visual of some kind and text interpretation


\newpage
